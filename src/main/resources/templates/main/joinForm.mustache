{{> /layout/header}}

<!-- 컨테이너 시작 -->
<div class="container mt-3">

    <!-- 회원가입 폼 시작 -->
    <form class="m_auth_box" novalidate>
    <div class="form-group">
      <label>아이디</label>
      <input id="username" type="text" class="form-control mt-3" placeholder="username" required>
<<<<<<< HEAD
=======
    </div>
    <div class="form-group mt-3">
      <label>비밀번호</label>
      <input id="password" type="password" name="password" class="form-control"  title="password" required>
>>>>>>> fb00b36902b41162eae1f5fb9b170ac49922f8c4
    </div>
        <div class="form-group mt-3">
      <label>비밀번호</label>
      <input id="password" type="password" name="password" class="form-control"  title="password" required>
    <div class="form-group mt-3">
      <label>이메일</label>
      <input id="email" type="email" class="form-control" placeholder="name@example.com" required>
<<<<<<< HEAD
    <div class="form-group mt-3">
      <label>성별</label>
      <select id="male" class="form-select" required>
=======
    </div>
    <div class="form-group mt-3">
      <label>성별</label>
      <select id="sex" class="form-select" required>
>>>>>>> fb00b36902b41162eae1f5fb9b170ac49922f8c4
        <option selected>성별</option>
        <option value="male">남자</option>
        <option value="female">여자</option>
        <option value="female">선택안함</option>
      </select>
    </div>
        <div class="form-group mt-3">
      <label>주소</label>
      <input id="addr" type="text" class="form-control" minlength="10" data-v-message="Please enter minimum 10 characters"
        required>
    </div>
        <input id="btn-join" type="button" class="btn btn-primary" value="회원가입">
    </form>
    <!-- 회원가입 폼 끝 -->

</div>

<script>
    $("#btn-join").click(() => {
    join();
});
async function join() {
    // (1) username, password, email, addr 을 찾아서 오브젝트로 만든다.
    let joinDto = {
        username: $("#username").val(),
        password: $("#password").val(),
        email: $("#email").val(),
        male: $("#male option:selected").val(),
        addr: $("#addr").val()
    }

    // (2) fetch 요청한다. (json으로 변환해서)
    let response = await fetch("/join", {
        method: "POST",
        body: JSON.stringify(joinDto),
        headers: {
            'Content-Type': 'application/json; charset=utf-8'
        },
    });
    let responseParse = await response.json();
    console.log(responseParse);

        // (3) 회원가입이 잘되면 알림창 띄우고 로그인 페이지로 이동한다.
    if (responseParse.code == 1) {
        alert("회원가입완료");
        location.href = "loginForm";
    } else {
        alert('회원가입실패');
    }
}

</script>

<!-- 컨테이너 끝 -->
{{> /layout/footer}}